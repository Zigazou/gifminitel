<html>
    <head>
        <meta charset="utf-8">
        <title>Test GifMinitel</title>
        <style>
            body { background-color: lightgrey; }
        </style>
    </head>
    <body>
        <fieldset>
            <canvas id="test-canvas" width="320" height="250"></canvas>
        </fieldset>
        <fieldset>
            <img src="" id="test-img" width="320" height="250">
        </fieldset>
        <script src="gifminitel.js"></script>
        <script>
            const gifm = new GifMinitel(320, 250, 20)
            const canvas = document.getElementById("test-canvas")

            const ctx = canvas.getContext("2d")

            gifm.add(ctx.getImageData(0, 0, 320, 250))

            const colors = ["#FF0000", "#00FF00", "#0000FF", "#000000",
                            "#FFFF00", "#00FFFF", "#FF00FF", "#FFFFFF"]

            for(let i = 0; i < 500; i++) {
                ctx.fillStyle = colors[Math.random() * colors.length | 0]

                ctx.fillRect(
                    Math.random() * 320 | 0,
                    Math.random() * 250 | 0,
                    64,
                    64
                )

                gifm.add(ctx.getImageData(0, 0, 320, 250))
            }

            const data = gifm.save()
            const blob = new Blob([data], {type: "image/gif"});
            const url = URL.createObjectURL(blob, {type: "image/gif"})
            document.getElementById("test-img").src = url
        </script>
    </body>
</html>